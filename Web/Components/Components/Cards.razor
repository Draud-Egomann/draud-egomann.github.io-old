@using Web.Models

<div class="flex flex-wrap justify-around items-center own-bg-primary gap-32 lg:gap-16 py-24 overflow-hidden @(Class)">
  @for (int i = 0; i < Items.Count; i++) {
    <Web.Components.Components.Card Class="w-full lg:w-1/2 xl:w-1/3"
                                    Item=@Items[i]
                                    Index="i"
                                    OnCardClick="HandleCardClick" />
  }

  <Modal @ref="modalRef" Class="fixed w-3/5 h-fit !top-1/2 !left-1/2 !-translate-x-1/2 !-translate-y-1/2">
    <ModalContent Centered>
      <ModalHeader>
        <ModalTitle>@CurrentItem?.Title</ModalTitle>
        <CloseButton />
      </ModalHeader>
      <ModalBody>
        <p class="text-xl lg:text-3xl text-center text-white mt-16 mb-8 md:mt-0 md:mb-0 mx-4">
          @CurrentItem?.Description
        </p>

        <p class="text-xl lg:text-3xl text-center text-white mt-16 mb-8 md:mt-0 md:mb-0 mx-4">
          @CurrentItem?.MoreInfoText
        </p>
      </ModalBody>
    </ModalContent>
  </Modal>
</div>

@code {
  [Parameter]
  public string Class { get; set; } = string.Empty;

  [Parameter]
  [EditorRequired]
  public List<ProjectMenuItem> Items { get; set; } = default!;

  private ProjectMenuItem? CurrentItem;
  private Modal modalRef;

  private void HandleCardClick(ProjectMenuItem selectedItem) {
    CurrentItem = selectedItem;
    
    modalRef.Show();
  }
}
