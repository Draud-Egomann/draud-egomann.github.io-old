@page "/"
@using Microsoft.Extensions.Localization
@using Web.Components.Components
@using Web.Helper
@using Web.Models
@inject NavigationManager NavigationManager
@inject IStringLocalizer<Home> Localizer

<PageTitle>Justin Urbanek</PageTitle>

<HeroBanner Title="@Localizer["Me"]"
            Paragraphs=paragraphs
            HasButton="true"
            OnClick=NavigateToAbout
            IsBigView="true"
            ButtonText="@Localizer["MoreAboutMe"]" />

<Catchphrase ImageUrl="./imgs/me.png" Text=@catchphraseText />

<ContentGrid MainTitle="@Localizer["Experience"]"
             MainText="@Localizer["ExperienceText"]"
             MediaLinkItems="mediaLinkItems" />

@code {
  List<MediaLinkItem> mediaLinkItems;
  private string catchphraseText;
  private List<string> paragraphs = new();
  private DateTime birthDate = new DateTime(2004, 12, 17);

  protected override void OnInitialized() {
    base.OnInitialized();

    paragraphs.Add(Localizer["MeText1"]);
    paragraphs.Add(Localizer["MeText2"]);

    byte age = CalculateAge(birthDate);
    catchphraseText = string.Format(Localizer["CatchPhrase"], age);
    
    mediaLinkItems = MediaLinkItemHelper.GetExperienceContent();
  }

  private void NavigateToAbout() {
    NavigationManager.NavigateTo("/about");
  }

  private byte CalculateAge(DateTime birthDate) {
    DateTime now = DateTime.Now;
    byte age = (byte)(now.Year - birthDate.Year);

    if (now.Month < birthDate.Month || (now.Month == birthDate.Month && now.Day < birthDate.Day)) {
      age--;
    }

    return age;
  }
}